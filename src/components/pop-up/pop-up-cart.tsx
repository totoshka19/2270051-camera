import React, { useRef } from 'react';
import { usePopUp } from '../../hooks/use-pop-up';

type PopUpCartProps = {
  onClose: () => void;
  title: string;
  buttonText: string;
  iconType: 'success' | 'error';
};

function PopUpCart({ onClose, title, buttonText, iconType = 'success' }: PopUpCartProps) {
  const modalRef = useRef<HTMLDivElement | null>(null);
  const { handleOverlayClick } = usePopUp({
    onClose,
    modalRef,
  });

  return (
    <div className="modal is-active modal--narrow">
      <div className="modal__wrapper">
        <div className="modal__overlay" onClick={handleOverlayClick}></div>
        <div className="modal__content" ref={modalRef}>
          <p className="title title--h4">{title}</p>
          <svg
            className="modal__icon"
            width="80"
            height="78"
            aria-hidden="true"
          >
            {iconType === 'success' ? (
              <use xlinkHref="#icon-review-success"></use>
            ) : (
              <path
                fill="#FF6969"
                fillOpacity="1"
                fillRule="evenodd"
                d="M27.98 76.05C28.51 76.22 28.79 76.79 28.61 77.31C28.44 77.83 27.87 78.12 27.35 77.94C23.98 76.82 20.76 75.25 17.77 73.25C11.19 68.86 6.07 62.61 3.04 55.3C0.01 47.99 -0.78 39.95 0.76 32.19C2.31 24.43 6.12 17.3 11.71 11.71C17.3 6.12 24.43 2.31 32.19 0.76C39.95 -0.78 47.99 0.01 55.3 3.04C55.81 3.25 56.05 3.84 55.84 4.35C55.63 4.86 55.05 5.1 54.54 4.89C47.59 2.01 39.95 1.26 32.58 2.72C25.21 4.19 18.44 7.81 13.13 13.12C7.81 18.44 4.19 25.21 2.73 32.58C1.26 39.95 2.01 47.59 4.89 54.54C7.76 61.48 12.63 67.42 18.88 71.59C21.72 73.49 24.78 74.98 27.98 76.05ZM80 39.99C80 40.55 79.55 40.99 79 40.99C78.44 40.99 78 40.55 78 39.99C78 32.48 75.77 25.13 71.59 18.88C68.88 14.82 65.42 11.35 61.43 8.62C60.97 8.31 60.86 7.68 61.17 7.23C61.48 6.77 62.1 6.66 62.56 6.97C66.76 9.84 70.4 13.5 73.25 17.77C77.65 24.35 80 32.08 80 39.99ZM68.06 68.19C67.67 68.58 67.03 68.58 66.64 68.19C66.25 67.8 66.25 67.16 66.64 66.77C70.14 63.27 72.91 59.13 74.81 54.61C75.02 54.1 75.61 53.86 76.12 54.07C76.63 54.29 76.87 54.87 76.65 55.38C74.66 60.14 71.74 64.5 68.06 68.19ZM26.9 70.3C27.13 69.8 26.92 69.21 26.42 68.97C25.08 68.34 23.78 67.62 22.54 66.82C22.08 66.51 21.46 66.65 21.16 67.11C20.86 67.57 20.99 68.19 21.45 68.49C22.77 69.35 24.14 70.11 25.57 70.78C26.07 71.02 26.67 70.8 26.9 70.3ZM14.42 60.88C14.86 60.54 14.94 59.91 14.61 59.48C10.75 54.45 8.48 48.4 8.06 42.09C7.65 35.77 9.12 29.48 12.28 23.99C15.45 18.51 20.17 14.09 25.84 11.3C31.52 8.5 37.9 7.44 44.17 8.27C50.45 9.09 56.34 11.76 61.09 15.94C65.85 20.11 69.27 25.6 70.9 31.71C71.05 32.25 71.6 32.56 72.13 32.42C72.66 32.28 72.98 31.73 72.84 31.2C71.1 24.7 67.47 18.87 62.41 14.43C57.36 10 51.1 7.16 44.43 6.29C37.77 5.41 30.99 6.53 24.96 9.5C18.93 12.48 13.91 17.17 10.55 22.99C7.19 28.82 5.63 35.51 6.07 42.22C6.51 48.93 8.93 55.36 13.02 60.69C13.36 61.13 13.99 61.21 14.42 60.88ZM42.54 70.17C42.87 71.37 43.71 71.95 44.47 71.99C45.19 72.03 46.16 71.61 46.78 70.06L47.71 70.43L46.78 70.06C47.5 68.27 47.34 65.55 46.58 62.32C45.84 59.14 44.57 55.65 43.29 52.45C43.17 52.14 43.2 51.79 43.39 51.51C43.58 51.24 43.89 51.07 44.22 51.07L57.59 51.07C59.25 51.07 60.64 49.68 60.64 47.89C60.64 46.1 59.25 44.71 57.59 44.71C57.04 44.71 56.59 44.26 56.59 43.71C56.59 43.15 57.04 42.71 57.59 42.71L58.94 42.71C60.6 42.71 62 41.31 62 39.52C62 37.73 60.6 36.34 58.94 36.34L57.59 36.34C57.04 36.34 56.59 35.89 56.59 35.34C56.59 34.79 57.04 34.34 57.59 34.34C59.25 34.34 60.64 32.94 60.64 31.15C60.64 29.36 59.25 27.97 57.59 27.97L54.89 27.97C54.33 27.97 53.89 27.52 53.89 26.97C53.89 26.42 54.33 25.97 54.89 25.97C55.66 25.97 56.24 25.71 56.62 25.31C57 24.92 57.27 24.31 57.27 23.48C57.27 22.65 57 22.05 56.62 21.65C56.24 21.26 55.66 21 54.89 21C43.17 21 42.04 21 33.35 21.7C29.6 22.01 28.57 22.01 24.56 22C23.82 22 22.97 22 22 22C21.44 22 21 21.55 21 21C21 20.44 21.44 20 22 20C22.98 20 23.83 20 24.57 20C28.56 20.01 29.52 20.01 33.18 19.71C41.95 19 43.14 19 54.89 19C56.14 19 57.25 19.43 58.05 20.26C58.85 21.08 59.27 22.22 59.27 23.48C59.27 24.44 59.03 25.33 58.56 26.06C60.91 26.53 62.64 28.65 62.64 31.15C62.64 32.59 62.07 33.9 61.13 34.85C62.84 35.69 64 37.48 64 39.52C64 41.56 62.84 43.35 61.13 44.19C62.07 45.14 62.64 46.45 62.64 47.89C62.64 50.72 60.41 53.07 57.59 53.07L45.69 53.07C46.79 55.93 47.86 59 48.53 61.87C49.3 65.15 49.6 68.4 48.64 70.8C47.78 72.96 46.12 74.09 44.35 73.99C42.62 73.89 41.14 72.61 40.61 70.7C38.92 64.59 35.81 61.43 32.15 57.72C31.74 57.3 31.32 56.87 30.89 56.43C30.86 56.4 30.83 56.37 30.8 56.33C29.22 54.18 27.97 52.79 26.74 51.85C25.54 50.91 24.31 50.37 22.74 49.96C22.21 49.82 21.89 49.28 22.03 48.74C22.17 48.21 22.71 47.89 23.25 48.03C25.02 48.49 26.5 49.13 27.97 50.26C29.4 51.37 30.77 52.91 32.37 55.09C32.77 55.51 33.18 55.91 33.58 56.32C37.24 60.02 40.71 63.54 42.54 70.17ZM23.12 39.39C23.67 39.46 24.06 39.96 23.99 40.51C23.92 41.06 23.41 41.45 22.87 41.37C20.66 41.09 18.67 41 14 41C13.44 41 13 40.55 13 40C13 39.44 13.44 39 14 39C18.68 39 20.79 39.09 23.12 39.39ZM16.08 28.97C18.97 29.23 22.78 29.48 27.96 29.3C28.51 29.28 28.98 29.71 28.99 30.27C29.01 30.82 28.58 31.28 28.03 31.3C22.74 31.48 18.85 31.23 15.91 30.96C15.36 30.92 14.95 30.43 15 29.88C15.05 29.33 15.53 28.92 16.08 28.97Z"
              />
            )}
          </svg>
          <div className="modal__buttons">
            <button
              className="btn btn--purple modal__btn modal__btn--fit-width"
              type="button"
              onClick={onClose}
            >
              {buttonText}
            </button>
          </div>
          <button
            className="cross-btn"
            type="button"
            aria-label="Закрыть попап"
            onClick={onClose}
          >
            <svg width="10" height="10" aria-hidden="true">
              <use xlinkHref="#icon-close"></use>
            </svg>
          </button>
        </div>
      </div>
    </div>
  );
}

export default PopUpCart;
